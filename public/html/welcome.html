<!DOCTYPE html>
<head>
  <link rel="stylesheet" href="../css/style.css">
    
</head>
    
  </div>
<body>
  <div class="bg"></div>
  <div class="bg bg2"></div>
  <div class="bg bg3"></div>
    
  
      <div class=”container”>
     
            
                <h1>SoccerTact</h1>
                
            <div>
              <div style="display: flex; justify-content: space-between;" class="player_select">
                <div>
                  <div class="logo_name">
                  <h4 style="color: white; margin: 0%; margin-bottom: 5px;">Home Team</h4>
                <img src="https://upload.wikimedia.org/wikipedia/en/5/53/Arsenal_FC.svg" style="height: 80px; width: 80px;"> 
                </div>
                <select style="background-color:rgba(0, 0, 0, 0.5); width: 320px; text-align-last:center;"class="home_team_select" id="home_team_select">
                  <option style="background-color: red; color: white;"id="home_players" selected disabled>Home Team</option>
                  
                </select>
                
                </div>
                
                  <div style="margin-top:5% "><img id="myImg" width="300px"   ></div>
      
                <div>
                  <div class="logo_name">
                    <h4 style="color: white; margin: 0%; margin-bottom: 5px;">Away Team</h4> 
                    <img src="https://cdn.freebiesupply.com/logos/large/2x/real-madrid-c-f-logo-png-transparent.png" style="height: 80px; width: 80px;">
                    </div> 
                <select style="background-color:rgba(0, 0, 0, 0.5); width: 320px; text-align-last:center;"class="away_team_select" id="away_team_select">
                  <option  style="background-color: red; color: white; "id="away_players" selected disabled>Away Team</option>
                </select>
                </div>
              </div>
              <div class="analysis_buttons">
                <button class="five">Pass Analysis</button>
                <button class="five">Shot Analysis</button>
                <button class="five">Show Heatmap</button>
              </div> 
    
      </div>

     

     <script>
       

        var img= document.getElementById("myImg");
        img.src="../analysis/home.png";

img.onload = function(e){
    
};

img.onerror = function(e) {
  window.location.href='/loading';
};


       console.log("heloo")
    setTimeout(homePlayers, 0.01);
      async function homePlayers(){
        const response = await fetch("../analysis/home_line.json");
        const players = await response.json();
        let home_players_data = players;
        // console.log(home_players_data);
        for (i = 0; i < home_players_data.length; i++) {
          //console.log(i)
          var mySelect = document.getElementById("home_team_select");
          mySelect.setAttribute("size", mySelect.childElementCount);
          var newOption = document.createElement("option");
          newOption.value = home_players_data[i];
          // console.log(home_players_data[i]);
          if (typeof newOption.textContent === "undefined") {
            newOption.innerText = home_players_data[i];
          } else {
            newOption.textContent = home_players_data[i];
          }
          mySelect.appendChild(newOption);
        }
      }
      setTimeout(awayPlayers, 0.01);
      async function awayPlayers(){
        const response = await fetch("../analysis/away_line.json");
        const players = await response.json();
        let away_players_data = players;
        // console.log(away_players_data);
        for (i = 0; i < away_players_data.length; i++) {
          var mySelect = document.getElementById("away_team_select");
          mySelect.setAttribute("size", mySelect.childElementCount);
          var newOption = document.createElement("option");
          newOption.value = away_players_data[i];
          if (typeof newOption.textContent === "undefined") {
            newOption.innerText = away_players_data[i];
          } else {
            newOption.textContent = away_players_data[i];
          }
          mySelect.appendChild(newOption);
         
        }
      }
      var data = new FormData();
     
     
      document.getElementById("home_team_select").addEventListener('change', (event) => {
      //   
      async function homeply(){
    
      const response = await fetch('/analysis/matchid.json');
      const names = await response.json();
      var id= names["id"];
    
        var mySelect = document.getElementById('home_team_select');
        var namesteam=mySelect.options[mySelect.selectedIndex].value;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/plyloading', true);
        data.append('plyname',namesteam);
        data.append('id', id);
        console.log(namesteam);
        xhr.send(data);
        }
        setTimeout(homeply, 0);
        window.location.href = "/plyloading";
      });
      document.getElementById("away_team_select").addEventListener('change', (event) => {
        //
        async function awayply(){
    
    const response = await fetch('/analysis/matchid.json');
    const names = await response.json();
    var id= names["id"];
        var mySelect = document.getElementById('away_team_select');
        var namesteam=mySelect.options[mySelect.selectedIndex].value;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/plyloading', true);
        data.append('plyname',namesteam);
        data.append('id', id);
        console.log(namesteam);
        xhr.send(data);
      } setTimeout(awayply, 0);
        window.location.href = "/plyloading";
       });
     </script>
</body>
</html>