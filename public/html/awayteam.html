<!DOCTYPE html> 
<head>
  <link rel="stylesheet"  media="screen" href="../css/style.css">
  <link rel="stylesheet" media="print" href="../css/print.css" />
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    
</head>
    
  </div>
<body>
  <div class="bg"></div>
  <div class="bg bg2"></div>
  <div class="bg bg3"></div>
    
  <div class=”container”>
    <div class="print">
      <img style="margin-left: 0px; max-width: 20%;" src="../images/SoccerTact_logo.png">
      <button  class="back-button" onclick=window.history.go(-2) >Home</button>
      <button class="print-button" onclick="window.print()" style=""><span class="print-icon"></span></button>
    </div>
    <br><br>   
            
            
        <div>
          <div style="display: flex; justify-content: space-between;" class="player_select">
            <div>
              <div class="logo_name">
              <h4 style="color: black; margin: 0%; margin-bottom: 5px;" id="aname"></h4>
            <img  id="logoaway" style="height: 100px; width: 100px; border: 5px solid gold;"> 
            <br>
            </div>
            <select style="background-color:rgba(0, 0, 0, 0.5); width: 330px; text-align-last:center; "class="away_team_select" id="away_team_select">
              <option style="background-color: gold; color: white;"id="away_players" selected disabled>Away Team</option>
              
            </select>
            
            </div>
            
              <div style="">
                <div style="top:10%"> <img src="../analysis/t2_timeline.png" style="width: 600px; 
                  height: 140px; 
                  object-fit: cover;
                  " ></div>
                  <img id="myImg" width="600px" height="400px" style=""  ></div>
              <div class="analysis_buttons">
                <button style="width: 261px; height: 70px; margin-top: 25%;" class="pass" onclick="pass_flow()">Pass <b>Flow</b></button>
                <button style="width: 261px; height: 70px;" class="five" onclick="Shot_map()">Shot <b>Map</b></button>
                <button style="width: 261px; height: 70px;" class="heat" onclick="pass_heat()">Pass <b>Heatmap</b></button>
                <button style="width: 261px; height: 70px;" class="network" onclick="pass_net()">Passing <b>Network</b></button>
                <button style="width: 261px; height: 70px;" class="duel" onclick="duel()">Duel <b>HeatMap</b></button>
                <button style="width: 261px; height: 70px;" class="pressure" onclick="pressure()">Pressure <b>Heatmap</b></button>
              </div> 
          
          </div>
  </div>

     

     <script>
             setTimeout(team1, 0);
      
      async function team1(){
        const n= await fetch('../analysis/awayname.json');
      const a_name = await n.json();
      var aname= a_name["aname"];
      
      document.getElementById("aname").innerText=aname;
      const response = await fetch('/script/s_d.json');
      const names = await response.json();
   
       
     
      }
       var img= document.getElementById("myImg");
       function pass_flow(){
        img.src="../analysis/t2pass.png";
       }
       function Shot_map(){
        img.src="../analysis/t2_shot.png";
       }
       function pass_heat(){
        img.src="../analysis/t2_pass.png";
       }
       function pass_net(){
        img.src="../analysis/t2_PN.png";
       }
       function duel(){
        img.src="../analysis/t2_duel.png";
       }
       function pressure(){
        img.src="../analysis/t2_pressure.png";
       }

      async function awayply(){
    
    const response = await fetch('/analysis/awayimg.json');
    const names = await response.json();
    var id= names;
    console.log(id);
    document.getElementById("logoaway").src=names;
       }
       setTimeout(awayply, 0);

        
        img.src="../script/lineup.png";
        

img.onload = function(e){
    
};

img.onerror = function(e) {
  window.location.href='/loading';
};

       console.log("heloo")
      setTimeout(awayPlayers, 0.01);
      async function awayPlayers(){
        const response = await fetch("../analysis/away_line.json");
        const players = await response.json();
        let away_players_data = players;
        // console.log(away_players_data);
        for (i = 0; i < away_players_data.length; i++) {
          var mySelect = document.getElementById("away_team_select");
          mySelect.setAttribute("size", mySelect.childElementCount);
          var newOption = document.createElement("option");
          newOption.value = away_players_data[i];
          if (typeof newOption.textContent === "undefined") {
            newOption.innerText = away_players_data[i];
          } else {
            newOption.textContent = away_players_data[i];
          }
          mySelect.appendChild(newOption);
         
        }
      }
      var data = new FormData();
     
      document.getElementById("away_team_select").addEventListener('change', (event) => {
        //
        async function awayply(){
    
    const response = await fetch('/analysis/matchid.json');
    const names = await response.json();
    var id= names["id"];
        var mySelect = document.getElementById('away_team_select');
        var namesteam=mySelect.options[mySelect.selectedIndex].value;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/plyloading', true);
        data.append('plyname',namesteam);
        data.append('id', id);
        console.log(namesteam);
        xhr.send(data);
      } setTimeout(awayply, 0);
        window.location.href = "/plyloading";
       });
     </script>
</body>
</html>
