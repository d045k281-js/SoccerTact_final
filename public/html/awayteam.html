<!DOCTYPE html> 
<head>
  <link rel="stylesheet" href="../css/style.css">
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    
</head>
    
  </div>
<body>
  <div class="bg"></div>
  <div class="bg bg2"></div>
  <div class="bg bg3"></div>
    
  
      <div class=”container”>
        <img style="margin-left: 0px; max-width: 15%;" src="../images/SoccerTact_logo.png"><br><br>
            
                
                
            <div>
              <div style="display: flex; justify-content: space-between;" class="player_select">
                <div>
                    <div class="logo_name">
                      <h4 style="color: white; margin: 0%; margin-bottom: 5px;">Away Team</h4> 
                      <img id="logoaway" style="height: 80px; width: 80px; border: 5px solid gold">
                      </div> 
                      <br>
                  <select style="background-color:rgba(0, 0, 0, 0.5); width: 320px; text-align-last:center; height: 410px;"class="away_team_select" id="away_team_select">
                    <option  style="background-color: gold; color: white; "id="away_players" selected disabled>Away Team</option>
                  </select>
                  </div>             
                  <div class="analysis_buttons">
                    <button style="width: 200px; height: 80px;" class="pass">Pass <b>Flow</b></button>
                    <button style="width: 200px; height: 80px;" class="five">Shot <b>Map</b></button>
                    <button style="width: 200px; height: 80px;" class="heat">Pass <b>Heatmap</b></button>
                    <button style="width: 200px; height: 80px;" class="network">Passing <b>Network</b></button>
                    <button style="width: 200px; height: 80px;" class="duel">Duel <b>HeatMap</b></button>
                    <button style="width: 200px; height: 80px;" class="pressure">Pressure <b>Heatmap</b></button>
                  </div> 
      
              
              </div>
           
    
      </div>

     

     <script>

      async function awayply(){
    
    const response = await fetch('/analysis/awayimg.json');
    const names = await response.json();
    var id= names;
    console.log(id);
    document.getElementById("logoaway").src=names;
       }
       setTimeout(awayply, 0);

        var img= document.getElementById("myImg");
        img.src="../analysis/heatmap.png";

img.onload = function(e){
    
};

img.onerror = function(e) {
  window.location.href='/loading';
};

       console.log("heloo")
      setTimeout(awayPlayers, 0.01);
      async function awayPlayers(){
        const response = await fetch("../analysis/away_line.json");
        const players = await response.json();
        let away_players_data = players;
        // console.log(away_players_data);
        for (i = 0; i < away_players_data.length; i++) {
          var mySelect = document.getElementById("away_team_select");
          mySelect.setAttribute("size", mySelect.childElementCount);
          var newOption = document.createElement("option");
          newOption.value = away_players_data[i];
          if (typeof newOption.textContent === "undefined") {
            newOption.innerText = away_players_data[i];
          } else {
            newOption.textContent = away_players_data[i];
          }
          mySelect.appendChild(newOption);
         
        }
      }
      var data = new FormData();
     
      document.getElementById("away_team_select").addEventListener('change', (event) => {
        //
        async function awayply(){
    
    const response = await fetch('/analysis/matchid.json');
    const names = await response.json();
    var id= names["id"];
        var mySelect = document.getElementById('away_team_select');
        var namesteam=mySelect.options[mySelect.selectedIndex].value;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/plyloading', true);
        data.append('plyname',namesteam);
        data.append('id', id);
        console.log(namesteam);
        xhr.send(data);
      } setTimeout(awayply, 0);
        window.location.href = "/plyloading";
       });
     </script>
</body>
</html>
