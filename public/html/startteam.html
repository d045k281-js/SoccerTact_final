<!DOCTYPE html>
<html>
    <head>
      <base href="/"> 
      <link rel="stylesheet" href="../css/style.css">
      <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css" integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />
    
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js" integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>
      <img style="display: flex; margin-left: 0px; max-width: 35%;" src="../images/SoccerTact_logo.png"><br><br>
    </head>
<body>
    
       
       
    


        <img id="myImg" width="50%" height="50%">
      </div>

     
      <scrip src="main.js">
     
      
    </script>
    <div class="bg"></div>
    <div class="bg bg2"></div>
    <div class="bg bg3"></div>
    
   
    <div class="content" style="  display: flex;">
        
 
        
            <div class="logo1" style=" float:right; " >
         
          
          <a href="/team1"><img id="logohome" style="height: 150px; width: 150px; border: 5px solid red;">  </a>
          <h4 style="color: black; margin: 0%; margin-bottom: 5px; font-size: 30px;">Home Team</h4>
          
          </div>
          <div class="logo2" style=" float:left; margin-left: 10%; margin-right: 10%;" >
            <h4 style="color: white;  font-size: 50px; font-family: fantasy;">VS</h4> 
            </div> 
          <div class="logo2" style=" float:left; " >
           
         
            <a href="/team2"> <img id="logoaway" style="height: 150px; width: 150px; border: 5px solid gold"></a>
          <h4 style="color: black; margin: 0%; margin-bottom: 5px; font-size: 30px;  ">Away Team</h4> 
            </div> 
 
      </div>
 

    <script>
          async function homeply(){
    
    const response = await fetch('/analysis/homeimg.json');
    const names = await response.json();
    var id= names;
    console.log(id);
    document.getElementById("logohome").src=names;
       }

      setTimeout(homeply, 0);
      async function awayply(){
    
    const response = await fetch('/analysis/awayimg.json');
    const names = await response.json();
    var id= names;
    console.log(id);
    document.getElementById("logoaway").src=names;
       }
       setTimeout(awayply, 0);

       
    
    
        function play1(){
          var xhttp = new XMLHttpRequest();
          xhttp.open("GET", "/play", true);
            	xhttp.send(); 
    }

      setTimeout(team1, 0);
     
      async function team1(){
      const response = await fetch('/script/s_d.json');
      const names = await response.json();
      for(i=0; i<names.length; i++){
        $(document).ready(function () {
        $('select').selectize({
            sortField: 'text'
        });
    });

  // to clear the selected value.
   $('form').find('.selectized').each(function(index, element) { element.selectize && element.selectize.clear() }) 
      var varhome=(names[i]["home_team"]); 
      var varaway=names[i]["away_team"];
      var id=names[i]["match_id"]
      var teams=varhome+" vs "+varaway+" ,"+ id;
 //     console.log(id);
      var mySelect = document.getElementById('mySelect');
        var newOption = document.createElement('option');
    
    newOption.value = teams;
    
    // Not all browsers support textContent (W3C-compliant)
    // When available, textContent is faster (see http://stackoverflow.com/a/1359822/139010)
    if (typeof newOption.textContent === 'undefined')
    {
        newOption.innerText = teams;
    }
    else
    {
        newOption.textContent = teams;
    }
      
    
    mySelect.appendChild(newOption);

   
    
    }
   
       
     
      }
      function play(){
      var mySelect = document.getElementById('mySelect');
    var namesteam=mySelect.options[mySelect.selectedIndex].value;
        console.log(namesteam.split(",")[1])
        console.log(namesteam);
         var hometeam =namesteam.split(" vs ")[0];
  
       
  var awayteam=namesteam.split(" vs ")[1].split(" ,")[0];
    var data = new FormData();
    var data2=new FormData();
data.append('id',namesteam.split(",")[1]);
data.append('home', hometeam);
data.append('away', awayteam);

var xhr = new XMLHttpRequest();
xhr.open('POST', '/play', true);
xhr.onload = function () {
    // do something to response
    console.log(this.responseText);
};
xhr.send(data);


        if(namesteam=="Select match"){
          alert("Choose the team first!");
        }
        else{
       window.location.href = "/loading";
        } 

      }
    </script>
<script>
 
    
  </script>
    

</body>



</html>