<!DOCTYPE html>
<html>
    <head>
      <base href="/"> 
      <link rel="stylesheet" href="../css/style.css">
      <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
      <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css" integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" /> -->
      <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/css/selectize.min.css">
      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/js/standalone/selectize.min.js"></script> -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js" integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>
      
       <link rel=stylesheet href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
      <img style="display: flex; margin: 0px auto;" src="../images/SoccerTact_logo.png"><br><br>
      
    </head>
<body>
    
       
       
    


        <img id="myImg" width="50%" height="50%">
      </div>

     
      <scrip src="main.js">
     
      
    </script>
    <div class="bg"></div>
    <div class="bg bg2"></div>
    <div class="bg bg3"></div>
    
      
    <div class="content">
      <div class="selected">
        <br></br>
        <input type="text"  list="mydatalist"  id ="mySelect" class="mySelect" placeholder="Select a match" style="text-align: center;">
    <datalist id="mydatalist">
      <!-- <option selected disabled style="text-align: center;"><b>Select match</b></option> -->
      <option id="myoption"></option>
    </datalist>
          <!-- <select id ="mySelect" class="mySelect">
           
          
            
          </select><br><br> -->
          <br><br>
          <span class="bp3-icon bp3-icon-double-caret-vertical"></span>
        </div>
        <button onclick="play()" class="play">Play</button>
        <br></br>
       
      </div>
 

    <script>
    
    
        function play1(){
          var xhttp = new XMLHttpRequest();
          xhttp.open("GET", "/play", true);
            	xhttp.send(); 
    }

      setTimeout(team1, 0);
     
      async function team1(){
      const response = await fetch('/script/s_d.json');
      const names = await response.json();
      for(i=0; i<names.length; i++){
        $(document).ready(function () {
        $('select').selectize({
            sortField: 'text'
        });
  
       
    });

  // to clear the selected value.
   $('form').find('.selectized').each(function(index, element) { element.selectize && element.selectize.clear() }) 
      var varhome=(names[i]["home_team"]); 
      var varaway=names[i]["away_team"];
      var id=names[i]["match_id"]
      var teams=varhome+" vs "+varaway+" ,"+ id;
 //     console.log(id);
      var mySelect = document.getElementById('mydatalist');
        var newOption = document.createElement('option');
    
    newOption.value = teams;
    
    // Not all browsers support textContent (W3C-compliant)
    // When available, textContent is faster (see http://stackoverflow.com/a/1359822/139010)
    if (typeof newOption.textContent === 'undefined')
    {
        newOption.innerText = teams;
    }
    else
    {
        newOption.textContent = teams;
    }
      
    
    mySelect.appendChild(newOption);

   
    
    }
   
       
     
      }
      function play(){
      var input = document.getElementById('mySelect');
    var namesteam=input.value;
        console.log(namesteam.split(",")[1])
        console.log(namesteam);
         var hometeam =namesteam.split(" vs ")[0];
  
       
  var awayteam=namesteam.split(" vs ")[1].split(" ,")[0];
    var data = new FormData();
    var data2=new FormData();
data.append('id',namesteam.split(",")[1]);
data.append('home', hometeam);
data.append('away', awayteam);

var xhr = new XMLHttpRequest();
xhr.open('POST', '/play', true);
xhr.onload = function () {
    // do something to response
    console.log(this.responseText);
};
xhr.send(data);


        if(namesteam=="Select match"){
          alert("Choose the team first!");
        }
        else{
       window.location.href = "/loading";
        } 

      }
    </script>
<script>
 
    
  </script>
    

</body>



</html>
<style>
  #option{
    font-size: 40px;
  }
</style>